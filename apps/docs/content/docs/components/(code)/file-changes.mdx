---
title: File Changes
description: A collapsible component for displaying file diffs with accept/reject actions.
path: elements/components/file-changes
---

The `FileChanges` component displays file changes in a collapsible format with a header showing the filename, change statistics, status indicator, and action buttons. When expanded, it renders the diff content.

<Preview path="file-changes" />

## Installation

<ElementsInstaller path="file-changes" />

## Usage with AI SDK

Build a code editing interface that shows file changes with accept/reject functionality using the [`useChat`](https://ai-sdk.dev/docs/reference/ai-sdk-ui/use-chat) hook.

Add the following component to your frontend:

```tsx title="app/page.tsx"
'use client';

import { useChat } from '@ai-sdk/react';
import { useState } from 'react';
import {
  FileChanges,
  FileChangesHeader,
  FileChangesIcon,
  FileChangesTitle,
  FileChangesStats,
  FileChangesActions,
  FileChangesCopyButton,
  FileChangesRejectButton,
  FileChangesAcceptButton,
  FileChangesExpandButton,
  FileChangesContent,
} from '@/components/ai-elements/file-changes';

export default function Page() {
  const { messages } = useChat({
    api: '/api/edit',
  });

  const [fileStatuses, setFileStatuses] = useState<
    Record<string, 'pending' | 'accepted' | 'rejected'>
  >({});

  return (
    <div className="max-w-4xl mx-auto p-6 space-y-4">
      {messages.map((message) => {
        const toolInvocations = message.parts?.filter(
          (part) => part.type === 'tool-invocation'
        );

        return toolInvocations?.map((tool) => {
          if (tool.toolName === 'editFile' && tool.result) {
            const status = fileStatuses[tool.toolCallId] ?? 'pending';

            return (
              <FileChanges
                key={tool.toolCallId}
                oldFile={{
                  name: tool.result.filename,
                  content: tool.result.oldContent,
                }}
                newFile={{
                  name: tool.result.filename,
                  content: tool.result.newContent,
                }}
                status={status}
                onStatusChange={(newStatus) =>
                  setFileStatuses((prev) => ({
                    ...prev,
                    [tool.toolCallId]: newStatus,
                  }))
                }
              >
                <FileChangesHeader>
                  <div className="flex items-center gap-3">
                    <FileChangesIcon />
                    <FileChangesTitle />
                    <FileChangesStats />
                  </div>
                  <div className="flex items-center gap-1">
                    <FileChangesActions>
                      <FileChangesCopyButton />
                      <FileChangesRejectButton />
                      <FileChangesAcceptButton />
                    </FileChangesActions>
                    <FileChangesExpandButton />
                  </div>
                </FileChangesHeader>
                <FileChangesContent />
              </FileChanges>
            );
          }
          return null;
        });
      })}
    </div>
  );
}
```

## Features

- Collapsible diff display with smooth animations
- File header with icon, filename, and change statistics
- Status indicator (pending, accepted, rejected)
- Accept/reject action buttons with callbacks
- Copy button to copy the new file content
- Automatic light/dark theme switching for diffs
- Composable subcomponents for flexible layouts

## Examples

### Default Collapsed

By default, the component starts collapsed:

```tsx
<FileChanges oldFile={oldFile} newFile={newFile}>
  <FileChangesHeader>
    <div className="flex items-center gap-3">
      <FileChangesIcon />
      <FileChangesTitle />
      <FileChangesStats />
    </div>
    <FileChangesExpandButton />
  </FileChangesHeader>
  <FileChangesContent />
</FileChanges>
```

### Default Open

Start with the diff expanded:

```tsx
<FileChanges oldFile={oldFile} newFile={newFile} defaultOpen>
  <FileChangesHeader>
    <div className="flex items-center gap-3">
      <FileChangesIcon />
      <FileChangesTitle />
      <FileChangesStats />
    </div>
    <FileChangesExpandButton />
  </FileChangesHeader>
  <FileChangesContent />
</FileChanges>
```

### Custom File Icon

Use a custom icon for the file type:

```tsx
const TypeScriptIcon = () => (
  <svg className="size-4" viewBox="0 0 24 24" fill="currentColor">
    {/* ... */}
  </svg>
);

<FileChanges oldFile={oldFile} newFile={newFile}>
  <FileChangesHeader>
    <div className="flex items-center gap-3">
      <FileChangesIcon icon={<TypeScriptIcon />} />
      <FileChangesTitle />
    </div>
    <FileChangesExpandButton />
  </FileChangesHeader>
  <FileChangesContent />
</FileChanges>
```

### Minimal Header

Show only the filename and expand button:

```tsx
<FileChanges oldFile={oldFile} newFile={newFile}>
  <FileChangesHeader>
    <FileChangesTitle />
    <FileChangesExpandButton />
  </FileChangesHeader>
  <FileChangesContent />
</FileChanges>
```

## Props

### `<FileChanges />`

<TypeTable
  type={{
    oldFile: {
      description: 'The old file contents.',
      type: '{ name: string; content: string }',
    },
    newFile: {
      description: 'The new file contents.',
      type: '{ name: string; content: string }',
    },
    status: {
      description: 'The current status of the file changes.',
      type: '"pending" | "accepted" | "rejected"',
      default: '"pending"',
    },
    onStatusChange: {
      description: 'Callback when status changes (via accept/reject buttons).',
      type: '(status: "pending" | "accepted" | "rejected") => void',
    },
    defaultOpen: {
      description: 'Whether the collapsible starts open.',
      type: 'boolean',
      default: 'false',
    },
    '...props': {
      description: 'Any other props are spread to the Collapsible component.',
      type: 'React.ComponentProps<typeof Collapsible>',
    },
  }}
/>

### `<FileChangesHeader />`

<TypeTable
  type={{
    children: {
      description: 'Header content (icon, title, stats, actions).',
      type: 'React.ReactNode',
    },
    '...props': {
      description: 'Any other props are spread to the CollapsibleTrigger.',
      type: 'React.ComponentProps<typeof CollapsibleTrigger>',
    },
  }}
/>

### `<FileChangesIcon />`

<TypeTable
  type={{
    icon: {
      description: 'Custom icon element. Defaults to a generic file icon.',
      type: 'React.ReactNode',
    },
    '...props': {
      description: 'Any other props are spread to the container div.',
      type: 'React.HTMLAttributes<HTMLDivElement>',
    },
  }}
/>

### `<FileChangesTitle />`

<TypeTable
  type={{
    children: {
      description: 'Custom title content. Defaults to the filename from context.',
      type: 'React.ReactNode',
    },
    '...props': {
      description: 'Any other props are spread to the p element.',
      type: 'React.HTMLAttributes<HTMLParagraphElement>',
    },
  }}
/>

### `<FileChangesStats />`

<TypeTable
  type={{
    '...props': {
      description: 'Any other props are spread to the container div.',
      type: 'React.HTMLAttributes<HTMLDivElement>',
    },
  }}
/>

### `<FileChangesActions />`

<TypeTable
  type={{
    children: {
      description: 'Action buttons.',
      type: 'React.ReactNode',
    },
    '...props': {
      description: 'Any other props are spread to the container div.',
      type: 'React.HTMLAttributes<HTMLDivElement>',
    },
  }}
/>

### `<FileChangesMoreButton />`

<TypeTable
  type={{
    children: {
      description: 'Custom button content. Defaults to a more icon.',
      type: 'React.ReactNode',
    },
    '...props': {
      description: 'Any other props are spread to the Button component.',
      type: 'React.ComponentProps<typeof Button>',
    },
  }}
/>

### `<FileChangesCopyButton />`

<TypeTable
  type={{
    onCopy: {
      description: 'Callback fired after a successful copy.',
      type: '() => void',
    },
    onError: {
      description: 'Callback fired if copying fails.',
      type: '(error: Error) => void',
    },
    timeout: {
      description: 'How long to show the copied state (ms).',
      type: 'number',
      default: '2000',
    },
    '...props': {
      description: 'Any other props are spread to the Button component.',
      type: 'React.ComponentProps<typeof Button>',
    },
  }}
/>

### `<FileChangesRejectButton />`

<TypeTable
  type={{
    onReject: {
      description: 'Callback fired when the reject button is clicked.',
      type: '() => void',
    },
    '...props': {
      description: 'Any other props are spread to the Button component.',
      type: 'React.ComponentProps<typeof Button>',
    },
  }}
/>

### `<FileChangesAcceptButton />`

<TypeTable
  type={{
    onAccept: {
      description: 'Callback fired when the accept button is clicked.',
      type: '() => void',
    },
    '...props': {
      description: 'Any other props are spread to the Button component.',
      type: 'React.ComponentProps<typeof Button>',
    },
  }}
/>

### `<FileChangesExpandButton />`

<TypeTable
  type={{
    '...props': {
      description: 'Any other props are spread to the container div.',
      type: 'React.HTMLAttributes<HTMLDivElement>',
    },
  }}
/>

### `<FileChangesContent />`

<TypeTable
  type={{
    showLineNumbers: {
      description: 'Whether to show line numbers in the diff.',
      type: 'boolean',
      default: 'true',
    },
    maxHeight: {
      description: 'Maximum height of the diff content. Enables scrolling.',
      type: 'string | number',
    },
    '...props': {
      description: 'Any other props are spread to the CollapsibleContent.',
      type: 'React.ComponentProps<typeof CollapsibleContent>',
    },
  }}
/>
